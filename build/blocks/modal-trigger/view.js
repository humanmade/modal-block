document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".hm-modal-trigger").forEach(e=>{const t=e.querySelector(".modal-content");if(!t)return;let n=e.querySelector(".modal-trigger");if(!n){const o=Array.from(e.children),c=o.indexOf(t);c>0&&(n=o[c-1])}if(n?.closest(".is-placeholder")||!n)return;const o=t.querySelector(".modal-close");let c=null,s=null;const r=new Map;let i=!0;function l(){t.classList.remove("is-open"),document.body.style.overflow="",t.querySelectorAll("iframe").forEach(e=>{e.src=""}),t.querySelectorAll("video, audio").forEach(e=>{e.pause()}),c&&c.focus(),t.removeEventListener("keydown",a),document.removeEventListener("focusin",d),setTimeout(()=>{t.classList.contains("is-open")||(t.style.display="none")},300)}function a(e){if("Tab"!==e.key)return;const n=Array.from(t.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, iframe, [tabindex]:not([tabindex="-1"])')),o=n[0],c=n[n.length-1];s=document.activeElement,e.shiftKey&&document.activeElement===o?(e.preventDefault(),c.focus()):e.shiftKey||document.activeElement!==c||(e.preventDefault(),o.focus())}function d(e){t.classList.contains("is-open")&&(t.contains(e.target)?s=e.target:(e.preventDefault(),e.stopPropagation(),s&&t.contains(s)?s.focus():o&&o.focus()))}n.addEventListener("click",e=>{e.preventDefault(),function(){c=document.activeElement,t.classList.add("is-open"),t.style.display="flex",document.body.style.overflow="hidden";const e=t.querySelectorAll("iframe");i?(e.forEach(e=>{e.src&&r.set(e,e.src)}),i=!1):e.forEach(e=>{r.has(e)&&(e.src=r.get(e))}),o&&o.focus(),t.addEventListener("keydown",a),document.addEventListener("focusin",d)}()}),o&&o.addEventListener("click",l),t.addEventListener("click",e=>{e.target===t&&l()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("is-open")&&l()})})});